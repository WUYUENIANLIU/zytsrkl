<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥æˆ‘çš„æœ‹å‹17å²ç”Ÿæ—¥å¿«ä¹ï¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    
    <!-- å¼•å…¥Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore-compat.js"></script>
    
    <script>
        // Firebaseé…ç½® - æ›¿æ¢ä¸ºæ‚¨çš„å®é™…é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyC9LbJ0FyH0f0fV3J4Xz5V3X0fV3J4Xz5V3",
            authDomain: "birthday-wishes-12345.firebaseapp.com",
            projectId: "birthday-wishes-12345",
            storageBucket: "birthday-wishes-12345.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef1234567890abcdef"
        };
        
        // åˆå§‹åŒ–Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#87CEEB',
                        secondary: '#FFB6C1',
                        accent: '#98FB98',
                        dark: '#4A6FA5',
                        light: '#F0F8FF'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        cursive: ['"Comic Sans MS"', '"Marker Felt"', 'cursive']
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'bounce-slow': 'bounce 3s infinite',
                        'spin-slow': 'spin 8s linear infinite',
                        'fade-in': 'fadeIn 1.5s ease-in-out',
                        'slide-up': 'slideUp 1s ease-out',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }
            .text-shadow-lg {
                text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            }
            .bg-gradient-blue {
                background: linear-gradient(135deg, #87CEEB 0%, #E0F7FA 100%);
            }
            .bg-glass {
                background: rgba(255, 255, 255, 0.25);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.18);
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
        }
    </style>
</head>
<body class="bg-light min-h-screen overflow-x-hidden">
    <!-- é¡¶éƒ¨è£…é¥° -->
    <div class="fixed top-0 left-0 w-full h-16 bg-gradient-to-r from-primary/80 to-secondary/80 shadow-lg z-50 flex items-center justify-between px-6">
        <div class="text-white text-2xl font-bold tracking-wider text-shadow">
            <i class="fa-solid fa-birthday-cake mr-2"></i>17å²ç”Ÿæ—¥å¿«ä¹
        </div>
        <div class="hidden md:flex space-x-4">
            <a href="#home" class="text-white hover:text-secondary transition-colors duration-300 text-shadow">é¦–é¡µ</a>
            <a href="#wishes" class="text-white hover:text-secondary transition-colors duration-300 text-shadow">ç”Ÿæ—¥ç¥ç¦</a>
            <a href="#message" class="text-white hover:text-secondary transition-colors duration-300 text-shadow">ç•™è¨€æ¿</a>
        </div>
        <button class="md:hidden text-white text-xl" id="menu-toggle">
            <i class="fa-solid fa-bars"></i>
        </button>
    </div>

    <!-- ç§»åŠ¨ç«¯èœå• -->
    <div id="mobile-menu" class="fixed inset-0 bg-dark/95 z-50 transform translate-x-full transition-transform duration-300 ease-in-out md:hidden">
        <div class="flex justify-end p-6">
            <button id="menu-close" class="text-white text-2xl">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="flex flex-col items-center justify-center h-full space-y-8 text-xl">
            <a href="#home" class="text-white hover:text-secondary transition-colors duration-300 text-shadow-lg text-2xl">é¦–é¡µ</a>
            <a href="#wishes" class="text-white hover:text-secondary transition-colors duration-300 text-shadow-lg text-2xl">ç”Ÿæ—¥ç¥ç¦</a>
            <a href="#message" class="text-white hover:text-secondary transition-colors duration-300 text-shadow-lg text-2xl">ç•™è¨€æ¿</a>
        </div>
    </div>

    <!-- æ°”çƒè£…é¥° -->
    <div class="fixed -top-10 -left-10 w-20 h-20 bg-primary rounded-full opacity-70 animate-float shadow-lg"></div>
    <div class="fixed -top-5 -right-10 w-16 h-16 bg-secondary rounded-full opacity-70 animate-float" style="animation-delay: 0.5s"></div>
    <div class="fixed top-20 -right-5 w-12 h-12 bg-accent rounded-full opacity-70 animate-float" style="animation-delay: 1s"></div>
    <div class="fixed top-32 -left-8 w-14 h-14 bg-dark rounded-full opacity-70 animate-float" style="animation-delay: 1.5s"></div>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="pt-24 pb-16">
        <!-- æ¬¢è¿éƒ¨åˆ† -->
        <section id="home" class="min-h-[80vh] flex flex-col items-center justify-center px-6 relative overflow-hidden">
            <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1530103862676-de8c9debad1d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center opacity-20"></div>
            <div class="relative z-10 text-center">
                <h1 class="text-[clamp(2.5rem,8vw,5rem)] font-bold text-dark mb-6 animate-fade-in text-shadow-lg">
                    <span class="text-primary">ç”Ÿæ—¥å¿«ä¹</span>ï¼Œ<span class="text-secondary">æˆ‘çš„æœ‹å‹</span>ï¼
                </h1>
                <p class="text-[clamp(1.2rem,3vw,1.8rem)] text-gray-700 max-w-3xl mx-auto mb-10 animate-slide-up">
                    ä»Šå¤©æ˜¯ä½ 17å²çš„ç”Ÿæ—¥ï¼ğŸ‰ æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼Œ
                    æ‰€æœ‰çš„æ¢¦æƒ³éƒ½èƒ½æˆçœŸï¼Œæ‰€æœ‰çš„å¸Œæœ›éƒ½èƒ½å®ç°ï¼
                </p>
                <div class="animate-bounce-slow">
                    <a href="#wishes" class="inline-block bg-primary hover:bg-primary/80 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300">
                        æŸ¥çœ‹ç”Ÿæ—¥ç¥ç¦ <i class="fa-solid fa-heart ml-2 text-secondary"></i>
                    </a>
                </div>
            </div>
            <div class="absolute bottom-0 left-0 w-full h-20 bg-gradient-to-t from-light to-transparent"></div>
        </section>

        <!-- ç¥ç¦éƒ¨åˆ† -->
        <section id="wishes" class="py-20 px-6 bg-gradient-blue">
            <div class="max-w-6xl mx-auto">
                <h2 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-dark mb-12 text-center">
                    <i class="fa-solid fa-star text-secondary animate-pulse-slow"></i> ç”Ÿæ—¥ç¥ç¦ <i class="fa-solid fa-star text-secondary animate-pulse-slow"></i>
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- ç¥ç¦å¡ç‰‡1 -->
                    <div class="bg-white rounded-2xl shadow-xl overflow-hidden transform hover:-translate-y-2 transition-all duration-300 group">
                        <div class="h-40 bg-primary/20 flex items-center justify-center">
                            <i class="fa-solid fa-cake-candles text-6xl text-primary group-hover:scale-110 transition-transform duration-300"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-dark mb-3">é’æ˜¥æ°¸é©»</h3>
                            <p class="text-gray-700 leading-relaxed">
                                17å²ï¼Œå¦‚èŠ±èˆ¬çš„å¹´çºªï¼Œæ„¿ä½ çš„é’æ˜¥æ°¸è¿œç¾ä¸½åŠ¨äººï¼Œå……æ»¡æ´»åŠ›å’Œæ¿€æƒ…ã€‚
                                æœªæ¥çš„æ—¥å­é‡Œï¼Œæ— è®ºé‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œéƒ½è¦ä¿æŒä¹è§‚å‘ä¸Šçš„å¿ƒæ€ï¼
                            </p>
                        </div>
                    </div>
                    
                    <!-- ç¥ç¦å¡ç‰‡2 -->
                    <div class="bg-white rounded-2xl shadow-xl overflow-hidden transform hover:-translate-y-2 transition-all duration-300 group">
                        <div class="h-40 bg-secondary/20 flex items-center justify-center">
                            <i class="fa-solid fa-gift text-6xl text-secondary group-hover:scale-110 transition-transform duration-300"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-dark mb-3">æ¢¦æƒ³æˆçœŸ</h3>
                            <p class="text-gray-700 leading-relaxed">
                                æ„¿ä½ çš„17å²å……æ»¡æ— é™å¯èƒ½ï¼Œæ‰€æœ‰çš„æ¢¦æƒ³éƒ½èƒ½åœ¨è¿™ä¸ªå¹´çºªç§ä¸‹ç§å­ï¼Œ
                                å¹¶åœ¨æœªæ¥çš„æ—¥å­é‡ŒèŒå£®æˆé•¿ã€‚åšæŒè‡ªå·±çš„ç†æƒ³ï¼Œä½ ä¸€å®šèƒ½å®ç°å®ƒä»¬ï¼
                            </p>
                        </div>
                    </div>
                    
                    <!-- ç¥ç¦å¡ç‰‡3 -->
                    <div class="bg-white rounded-2xl shadow-xl overflow-hidden transform hover:-translate-y-2 transition-all duration-300 group">
                        <div class="h-40 bg-accent/20 flex items-center justify-center">
                            <i class="fa-solid fa-heart text-6xl text-accent group-hover:scale-110 transition-transform duration-300"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-dark mb-3">å¹¸ç¦å¿«ä¹</h3>
                            <p class="text-gray-700 leading-relaxed">
                                å¸Œæœ›ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼Œèº«è¾¹æ°¸è¿œæœ‰çœŸå¿ƒå…³çˆ±ä½ çš„æœ‹å‹å’Œå®¶äººã€‚
                                17å²ï¼Œæ˜¯äººç”Ÿä¸­æœ€ç¾å¥½çš„æ—¶å…‰ï¼Œå°½æƒ…äº«å—å§ï¼
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-16 bg-glass rounded-3xl p-8 shadow-xl">
                    <h3 class="text-2xl font-bold text-dark mb-6 text-center">ç‰¹åˆ«çš„ä½ ï¼Œç‰¹åˆ«çš„ç¥ç¦</h3>
                    <p class="text-lg text-gray-700 leading-relaxed mb-6">
                        äº²çˆ±çš„æœ‹å‹ï¼Œä»Šå¤©æ˜¯ä½ 17å²çš„ç”Ÿæ—¥ã€‚æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œä»¿ä½›æ˜¨å¤©æˆ‘ä»¬è¿˜åœ¨æ ¡å›­é‡Œä¸€èµ·è¿½é€å¬‰æˆï¼Œ
                        è½¬çœ¼é—´ä½ å·²ç»æ­¥å…¥äº†è¿™ä¸ªå……æ»¡æŒ‘æˆ˜å’Œæœºé‡çš„å¹´çºªã€‚
                    </p>
                    <p class="text-lg text-gray-700 leading-relaxed mb-6">
                        17å²ï¼Œæ˜¯é’æ˜¥çš„ç»½æ”¾ï¼Œæ˜¯æ¢¦æƒ³çš„å¯èˆªã€‚åœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œæˆ‘æƒ³å¯¹ä½ è¯´ï¼š
                        æ— è®ºæœªæ¥çš„è·¯æœ‰å¤šè¿œï¼Œæ— è®ºé‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œæˆ‘éƒ½ä¼šä¸€ç›´åœ¨ä½ èº«è¾¹æ”¯æŒä½ ã€‚
                    </p>
                    <p class="text-lg text-gray-700 leading-relaxed">
                        æ„¿ä½ çš„17å²å……æ»¡æ— é™çš„å¯èƒ½å’ŒæƒŠå–œï¼Œæ„¿ä½ çš„ç¬‘å®¹æ°¸è¿œç¿çƒ‚ï¼Œ
                        æ„¿ä½ çš„ç”Ÿæ´»å……æ»¡é˜³å…‰å’Œçˆ±ã€‚ç”Ÿæ—¥å¿«ä¹ï¼Œæˆ‘æœ€äº²çˆ±çš„æœ‹å‹ï¼ğŸ‚ğŸğŸ‰
                    </p>
                    <div class="mt-8 text-right">
                        <p class="font-bold text-dark">æ°¸è¿œæ”¯æŒä½ çš„æœ‹å‹</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç•™è¨€æ¿éƒ¨åˆ† -->
        <section id="message" class="py-20 px-6 bg-gradient-blue">
            <div class="max-w-6xl mx-auto">
                <h2 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-dark mb-12 text-center">
                    <i class="fa-solid fa-comments text-secondary animate-pulse-slow"></i> ç•™è¨€æ¿ <i class="fa-solid fa-comments text-secondary animate-pulse-slow"></i>
                </h2>
                
                <div class="bg-white rounded-2xl shadow-xl p-8 mb-12">
                    <h3 class="text-xl font-bold text-dark mb-6">ç•™ä¸‹ä½ çš„ç¥ç¦</h3>
                    <form id="message-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="name" class="block text-gray-700 font-medium mb-2">ä½ çš„åå­—</label>
                                <input type="text" id="name" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-300" placeholder="è¯·è¾“å…¥ä½ çš„åå­—" required>
                            </div>
                            <div>
                                <label for="relationship" class="block text-gray-700 font-medium mb-2">ä½ ä»¬çš„å…³ç³»</label>
                                <select id="relationship" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-300" required>
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="friend">å¥½æœ‹å‹</option>
                                    <option value="classmate">åŒå­¦</option>
                                    <option value="family">å®¶äºº</option>
                                    <option value="other">å…¶ä»–</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="message-text" class="block text-gray-700 font-medium mb-2">ç”Ÿæ—¥ç¥ç¦</label>
                            <textarea id="message-text" rows="4" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-300" placeholder="å†™ä¸‹ä½ å¯¹TAçš„ç”Ÿæ—¥ç¥ç¦..." required></textarea>
                        </div>
                        <div class="text-right">
                            <button type="submit" class="bg-primary hover:bg-primary/80 text-white font-bold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300">
                                <i class="fa-solid fa-paper-plane mr-2"></i> å‘é€ç¥ç¦
                            </button>
                        </div>
                    </form>
                </div>
                
                <div id="messages-container" class="space-y-6">
                    <div class="text-center py-8">
                        <div class="inline-block animate-spin-slow text-primary text-4xl mb-4">
                            <i class="fa-solid fa-spinner"></i>
                        </div>
                        <p class="text-gray-600">æ­£åœ¨åŠ è½½ç•™è¨€...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-dark text-white py-10 px-6">
        <div class="max-w-6xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">17å²ç”Ÿæ—¥å¿«ä¹</h3>
                    <p class="text-gray-300 leading-relaxed">
                        è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºä½ åˆ›å»ºçš„ç”Ÿæ—¥ç¥ç¦ç½‘ç«™ï¼Œå¸Œæœ›ä½ èƒ½å–œæ¬¢ï¼
                        æ„¿ä½ çš„17å²å……æ»¡æ— é™çš„å¯èƒ½å’ŒæƒŠå–œï¼
                    </p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">ç”Ÿæ—¥å€’è®¡æ—¶</h3>
                    <div id="countdown" class="flex space-x-4">
                        <div class="bg-primary/20 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold" id="days">00</div>
                            <div class="text-sm">å¤©</div>
                        </div>
                        <div class="bg-primary/20 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold" id="hours">00</div>
                            <div class="text-sm">æ—¶</div>
                        </div>
                        <div class="bg-primary/20 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold" id="minutes">00</div>
                            <div class="text-sm">åˆ†</div>
                        </div>
                        <div class="bg-primary/20 rounded-lg p-3 text-center">
                            <div class="text-2xl font-bold" id="seconds">00</div>
                            <div class="text-sm">ç§’</div>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">åˆ†äº«ç¥ç¦</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary transition-colors duration-300">
                            <i class="fa-brands fa-weixin text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary transition-colors duration-300">
                            <i class="fa-brands fa-weibo text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary transition-colors duration-300">
                            <i class="fa-brands fa-qq text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-primary transition-colors duration-300">
                            <i class="fa-solid fa-envelope text-white"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-8 text-center text-gray-400">
                <p>Â© 2025 ç”Ÿæ—¥ç¥ç¦ç½‘ç«™ | ä¸ºä½ ç‰¹åˆ«å®šåˆ¶</p>
            </div>
        </div>
    </footer>

    <!-- çƒŸèŠ±æ•ˆæœ -->
    <div id="fireworks-container" class="fixed inset-0 pointer-events-none z-40"></div>

    <script>
        // ç§»åŠ¨ç«¯èœå•æ§åˆ¶
        document.getElementById('menu-toggle').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.remove('translate-x-full');
        });
        
        document.getElementById('menu-close').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.add('translate-x-full');
        });
        
        // å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
                
                // å¦‚æœæ˜¯åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç‚¹å‡»å¯¼èˆªé“¾æ¥ï¼Œåˆ™å…³é—­èœå•
                if (window.innerWidth < 768) {
                    document.getElementById('mobile-menu').classList.add('translate-x-full');
                }
            });
        });
        
        // ç•™è¨€è¡¨å•æäº¤ - ä½¿ç”¨Firebase
        document.getElementById('message-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value;
            const relationship = document.getElementById('relationship').value;
            const messageText = document.getElementById('message-text').value;
            
            // æ·»åŠ åˆ°Firestore
            db.collection("messages").add({
                name: name,
                relationship: relationship,
                message: messageText,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                // é‡ç½®è¡¨å•
                document.getElementById('message-form').reset();
                
                // æ˜¾ç¤ºæˆåŠŸæç¤º
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-6 right-6 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg animate-slide-up z-50';
                toast.innerHTML = '<i class="fa-solid fa-check-circle mr-2"></i> ç¥ç¦å·²å‘é€ï¼';
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            })
            .catch((error) => {
                console.error("Error adding document: ", error);
                alert("å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•");
            });
        });
        
        // å®æ—¶è·å–ç•™è¨€
        db.collection("messages")
            .orderBy("timestamp", "desc")
            .onSnapshot((querySnapshot) => {
                const container = document.getElementById('messages-container');
                container.innerHTML = '';
                
                if (querySnapshot.empty) {
                    container.innerHTML = `
                        <div class="bg-white rounded-2xl shadow-lg p-8 text-center">
                            <i class="fa-solid fa-comment-slash text-4xl text-gray-300 mb-4"></i>
                            <p class="text-gray-600">è¿˜æ²¡æœ‰ç•™è¨€ï¼Œæˆä¸ºç¬¬ä¸€ä¸ªé€ä¸Šç¥ç¦çš„äººå§ï¼</p>
                        </div>
                    `;
                    return;
                }
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const date = data.timestamp ? data.timestamp.toDate() : new Date();
                    
                    // æ ¼å¼åŒ–æ—¥æœŸ
                    const timeString = formatDate(date);
                    
                    // è·å–å…³ç³»æ–‡æœ¬
                    let relationshipText = '';
                    switch(data.relationship) {
                        case 'friend':
                            relationshipText = 'å¥½æœ‹å‹';
                            break;
                        case 'classmate':
                            relationshipText = 'åŒå­¦';
                            break;
                        case 'family':
                            relationshipText = 'å®¶äºº';
                            break;
                        default:
                            relationshipText = 'å…¶ä»–';
                    }
                    
                    const messageElement = document.createElement('div');
                    messageElement.className = 'bg-white rounded-2xl shadow-lg p-6 transform hover:-translate-y-1 transition-all duration-300 animate-fade-in';
                    messageElement.innerHTML = `
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center mr-4">
                                <i class="fa-solid fa-user text-primary"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-dark">${data.name}</h4>
                                <p class="text-gray-500 text-sm">${relationshipText} Â· ${timeString}</p>
                            </div>
                        </div>
                        <p class="text-gray-700 leading-relaxed">
                            ${data.message}
                        </p>
                    `;
                    
                    container.appendChild(messageElement);
                });
            });
        
        // æ ¼å¼åŒ–æ—¥æœŸå‡½æ•°
        function formatDate(date) {
            const now = new Date();
            const diff = now - date;
            const seconds = Math.floor(diff / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (seconds < 60) {
                return 'åˆšåˆš';
            } else if (minutes < 60) {
                return `${minutes}åˆ†é’Ÿå‰`;
            } else if (hours < 24) {
                return `${hours}å°æ—¶å‰`;
            } else if (days < 7) {
                return `${days}å¤©å‰`;
            } else {
                return date.toLocaleDateString('zh-CN');
            }
        }
        
        // çƒŸèŠ±æ•ˆæœ
        function createFirework() {
            const fireworksContainer = document.getElementById('fireworks-container');
            const firework = document.createElement('div');
            
            // éšæœºä½ç½®
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            
            // éšæœºé¢œè‰²
            const colors = ['#87CEEB', '#FFB6C1', '#98FB98', '#FFA07A', '#DDA0DD'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            // è®¾ç½®æ ·å¼
            firework.className = 'absolute';
            firework.style.left = `${x}%`;
            firework.style.top = `${y}%`;
            firework.style.width = '6px';
            firework.style.height = '6px';
            firework.style.borderRadius = '50%';
            firework.style.backgroundColor = color;
            firework.style.boxShadow = `0 0 20px 10px ${color}80`;
            firework.style.animation = `fadeIn 0.5s ease-out forwards, fadeOut 0.5s ease-in 1s forwards`;
            
            // æ·»åŠ åˆ°å®¹å™¨
            fireworksContainer.appendChild(firework);
            
            // è‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                firework.remove();
            }, 2000);
        }
        
        // å®šæ—¶åˆ›å»ºçƒŸèŠ±
        setInterval(createFirework, 1000);
        
        // ç”Ÿæ—¥å€’è®¡æ—¶
        function updateCountdown() {
            // è®¾ç½®ä¸‹ä¸€ä¸ªç”Ÿæ—¥æ—¥æœŸï¼ˆ2025å¹´6æœˆ21æ—¥0ç‚¹0åˆ†0ç§’ï¼‰
            const today = new Date();
            const nextBirthday = new Date(2025, 5, 21, 0, 0, 0); // æœˆä»½æ˜¯ä»0å¼€å§‹çš„ï¼Œæ‰€ä»¥5ä»£è¡¨6æœˆ
            
            const diffTime = nextBirthday - today;
            
            // è®¡ç®—å‰©ä½™å¤©æ•°ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’
            const days = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diffTime % (1000 * 60)) / 1000);
            
            // æ›´æ–°DOM
            document.getElementById('days').innerText = days.toString().padStart(2, '0');
            document.getElementById('hours').innerText = hours.toString().padStart(2, '0');
            document.getElementById('minutes').innerText = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').innerText = seconds.toString().padStart(2, '0');
            
            // å¦‚æœç”Ÿæ—¥å·²è¿‡æˆ–ä»Šå¤©æ˜¯ç”Ÿæ—¥ï¼Œæ˜¾ç¤ºç”Ÿæ—¥å¿«ä¹ä¿¡æ¯
            if (diffTime <= 0) {
                document.getElementById('days').innerText = '00';
                document.getElementById('hours').innerText = '00';
                document.getElementById('minutes').innerText = '00';
                document.getElementById('seconds').innerText = '00';
            }
        }
        
        // åˆå§‹åŒ–å€’è®¡æ—¶å¹¶æ¯ç§’æ›´æ–°
        updateCountdown();
        setInterval(updateCountdown, 1000);
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–åŠ¨ç”»
            const animateElements = document.querySelectorAll('.animate-fade-in, .animate-slide-up');
            animateElements.forEach(el => {
                el.style.opacity = '0';
            });
            
            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                animateElements.forEach(el => {
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                });
            }, 100);
        });
    </script>
</body>
</html>
